<!DOCTYPE html>
<html>
<head>
    <title>Teste Imagens Dashboard - Esportes em Destaque</title>
    <style>
        body { font-family: Arial, sans-serif; background: #111; color: #fff; padding: 20px; }
        .result { background: #222; padding: 15px; margin: 10px 0; border-radius: 8px; }
        .success { border-left: 4px solid #0f0; }
        .error { border-left: 4px solid #f00; }
        .warning { border-left: 4px solid #ff0; }
        .image-test { 
            display: inline-block; 
            margin: 10px; 
            padding: 10px; 
            border: 1px solid #444; 
            border-radius: 8px; 
            background: #333;
        }
        .image-test img { 
            max-width: 200px; 
            max-height: 150px; 
            border-radius: 4px; 
            display: block;
            margin-bottom: 10px;
        }
        .image-placeholder {
            width: 200px;
            height: 150px;
            background: #555;
            border: 2px dashed #777;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <h1>üñºÔ∏è Teste Imagens Dashboard - Esportes em Destaque</h1>
    <button onclick="testarImagensDashboard()">üß™ Testar Imagens</button>
    
    <div id="results"></div>

    <script>
        function log(message, type = 'info') {
            const resultsDiv = document.getElementById('results');
            const logDiv = document.createElement('div');
            logDiv.className = `result ${type}`;
            logDiv.innerHTML = `<strong>${new Date().toLocaleTimeString()}:</strong> ${message}`;
            resultsDiv.appendChild(logDiv);
            console.log(message);
        }

        async function testarImagensDashboard() {
            document.getElementById('results').innerHTML = '';
            log('üöÄ Iniciando teste das imagens do dashboard...');

            try {
                // Buscar esportes da API
                const response = await fetch('https://atleticahubapi.onrender.com/api/esportes');
                
                if (!response.ok) {
                    throw new Error(`API HTTP ${response.status}`);
                }
                
                const esportes = await response.json();
                log(`‚úÖ API funcionando - ${esportes.length} esportes encontrados`, 'success');

                // Filtrar esportes (mesmo filtro do dashboard)
                const esportesFiltrados = esportes
                    .filter(esporte => esporte.nome.toLowerCase() !== 'geral' && esporte.id !== '0')
                    .slice(0, 6);

                log(`üìã Esportes ap√≥s filtro (para dashboard): ${esportesFiltrados.length}`, 'success');

                // Testar cada imagem
                esportesFiltrados.forEach((esporte, index) => {
                    log(`<strong>Esporte ${index + 1}: ${esporte.nome}</strong>`);
                    
                    if (esporte.fotoUrl) {
                        log(`üîó URL da imagem: ${esporte.fotoUrl}`);
                        
                        // Criar container de teste
                        const imageDiv = document.createElement('div');
                        imageDiv.className = 'image-test';
                        
                        // Criar elemento de imagem
                        const img = document.createElement('img');
                        img.src = esporte.fotoUrl;
                        img.alt = esporte.nome;
                        
                        // Handler de sucesso
                        img.onload = function() {
                            log(`‚úÖ Imagem carregada: ${esporte.nome}`, 'success');
                            imageDiv.style.borderColor = '#0f0';
                        };
                        
                        // Handler de erro
                        img.onerror = function() {
                            log(`‚ùå Falha ao carregar: ${esporte.nome} - ${esporte.fotoUrl}`, 'error');
                            imageDiv.style.borderColor = '#f00';
                            img.style.display = 'none';
                            
                            const placeholder = document.createElement('div');
                            placeholder.className = 'image-placeholder';
                            placeholder.textContent = '‚ùå Erro';
                            imageDiv.appendChild(placeholder);
                        };
                        
                        imageDiv.innerHTML = `
                            <h4>${esporte.nome}</h4>
                            <p>ID: ${esporte.id}</p>
                        `;
                        imageDiv.appendChild(img);
                        
                        document.getElementById('results').appendChild(imageDiv);
                        
                    } else {
                        log(`‚ö†Ô∏è ${esporte.nome}: Sem URL de imagem`, 'warning');
                        
                        // Criar container para esporte sem imagem
                        const imageDiv = document.createElement('div');
                        imageDiv.className = 'image-test';
                        imageDiv.style.borderColor = '#ff0';
                        imageDiv.innerHTML = `
                            <h4>${esporte.nome}</h4>
                            <p>ID: ${esporte.id}</p>
                            <div class="image-placeholder">
                                üì∑ Sem imagem
                            </div>
                        `;
                        document.getElementById('results').appendChild(imageDiv);
                    }
                });

            } catch (error) {
                log(`‚ùå Erro: ${error.message}`, 'error');
            }
        }

        // Executar teste automaticamente
        window.onload = () => {
            setTimeout(testarImagensDashboard, 1000);
        };
    </script>
</body>
</html>
